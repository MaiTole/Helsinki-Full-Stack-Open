(this["webpackJsonppart2-phonebook"]=this["webpackJsonppart2-phonebook"]||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),c=t.n(a),r=t(5),u=t(4),i=t(2),o=t(0),s=function(e){var n=e.searchFilter,t=e.handleFilterChange;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["Filter shown with: ",Object(o.jsx)("input",{name:"search",value:n,onChange:t})]}),Object(o.jsx)("br",{})]})},l=t(3),m=t.n(l),d="https://guarded-tundra-98399.herokuapp.com/api/persons",b=function(){return m.a.get(d).then((function(e){return e.data}))},j=function(e){return m.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return m.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return m.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=e.nameinput,t=e.numberinput,a=e.namehandler,c=e.numhandler;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["Name: ",Object(o.jsx)("input",{name:"newName",value:n,onChange:a}),"Number: ",Object(o.jsx)("input",{name:"newNumber",value:t,onChange:c})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("br",{}),Object(o.jsx)("button",{type:"submit",children:"Add New"})]})]})},O=function(e){var n=e.list,t=e.handleDeletion,a=e.searchFilter,c=n.filter((function(e){return e.name.includes(a)}));return""===a?Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsxs)("ul",{children:[" ",e.name," ",e.number," ",Object(o.jsx)("button",{onClick:t,name:e.name,id:e.id,children:" Delete "})]},e.id)}))}):Object(o.jsx)(o.Fragment,{children:c.map((function(e){return Object(o.jsxs)("ul",{children:[" ",e.name," ",e.number," ",Object(o.jsx)("button",{onClick:t,name:e.name,id:e.id,children:" Delete "})]},e.id)}))})},p=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"success",children:n})},x=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)({newName:"Emma Doe",newNumber:88888888}),l=Object(u.a)(c,2),m=l[0],d=l[1],x=Object(i.useState)(""),N=Object(u.a)(x,2),v=N[0],g=N[1],y=Object(i.useState)(null),k=Object(u.a)(y,2),F=k[0],C=k[1];Object(i.useEffect)((function(){b().then((function(e){a(e)}))}),[t]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)("form",{children:Object(o.jsx)(s,{searchFilter:v,handleFilterChange:function(e){g(e.target.value)}})}),Object(o.jsx)(p,{message:F}),Object(o.jsx)("h2",{children:" Add a New Entry"}),Object(o.jsx)("form",{onSubmit:function(e){e.preventDefault();var n={name:m.newName,number:m.newNumber},c=t.filter((function(e){return e.name.includes(m.newName)})).map((function(e){return e.id})),r={newName:"",newNumber:""};""===m.newName?window.alert("Please enter a valid name"):""===m.newNumber?window.alert("Please enter a valid number"):t.map((function(e){return e.name})).includes(m.newName)&t.map((function(e){return e.number})).includes(m.newNumber)?(window.alert("".concat(m.newName," already exists in phonebook")),d(r)):t.map((function(e){return e.name})).includes(m.newName)?(window.confirm("".concat(m.newName," already exists in phonebook, would you like to replace the old number with a new one?")),h(c,n).then((function(e){a(t.filter((function(n){return n.id!==c?n:e}))),C("".concat(m.newName,"'s number was successfully updated")),setTimeout((function(){C(null)}),3e3),d(r)})).catch((function(e){C("Unable to perform operation as ".concat(m.newName,"'s contact has already been deleted")),setTimeout((function(){C(null)}),3e3)}))):j(n).then((function(e){a(t.concat(e)),C("".concat(m.newName,"'s contact was successfully added")),setTimeout((function(){C(null)}),3e3),d(r)})).catch((function(e){console.log(e.response.data);C(JSON.stringify(Object.values(e.response.data)[0]))}))},children:Object(o.jsx)(w,{nameinput:m.newName,numberinput:m.newNumber,namehandler:function(e){d(Object(r.a)(Object(r.a)({},m),{},{newName:e.target.value}))},numhandler:function(e){d(Object(r.a)(Object(r.a)({},m),{},{newNumber:e.target.value}))}})}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(O,{list:t,handleDeletion:function(e){var n=e.target.id;!0===window.confirm("Do you want to delete ".concat(e.target.name,"'s contact?"))&&f(n).then((function(c){a(t.filter((function(e){return e.id!==n}))),C("".concat(e.target.name,"'s contact was successfully deleted")),setTimeout((function(){C(null)}),3e3)})).catch((function(e){C("Unable to perform operation as ".concat(m.newName,"'s contact has already been deleted")),setTimeout((function(){C(null)}),3e3)}))},searchFilter:v})]})};t(39);c.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e2380ac1.chunk.js.map